# 开发手册

##  项目介绍
我们需要合作实现一个离散时间调度器和一个量子网络仿真器。项目使用Python编写，以来的Python版本是 > 3.7.0。
在开发过程中，我们使用 [setuptools](https://pypi.org/project/setuptools/) 库来完成代码库的打包和分发，需要首先安装这个依赖：

```
pip3 install setuptools wheel
```

##  项目目录介绍
项目的主要目录如下：
```
- QuantNetSim       项目根目录
|- doc              存放项目文档
|- docs             自动生成的API手册
|- dist             打包后的二进制分发包
|- example          一些实例和用户程序
|- qns
|  |- schedular     离散时间调度器，核心
|  |- timer         定时器模块
|  |- topo          网络拓扑模块
|  |- log           日志模块
|  |- classic       经典网络模块
|  |- bb84          单光子网络模型
|  |- quantum       纠缠网络模型
|
|- LICENSE          代码开源协议
|- README.md        项目说明书
|- setup.py         项目打包脚本
```

## 代码开发和合作规范
我们代码和其他资料存放在 [Github](https://github.com/ertuil/QuantNetSim) 上。我们开发时候，请将代码上传到 `dev` 分支（非 `master` 分支）。

**Python代码的编码规范和变量命名请参考 [PEP8](https://www.python.org/dev/peps/pep-0008/) 标准。**

## 代码运行和编译方法

我们的项目使用 [setuptools](https://pypi.org/project/setuptools/) 进行打包。

我们在开发的时候，可以使用命令 
```
python3 setup.py develop
```
将整个 qns 库通过软连接的方式安装到系统的Python库中，这样我们就可以import qns 库了。
这个时候，理论上 example 中的实例程序就可以正常运行了。

当我们完成一个阶段开发的之后，我们可以将整个 qns 库打包成二进制进行分发（比如上传到 pypi 网站上，这样任何人都可以使用 pip 命令安装了）。我们使用
```
python3 setup.py bdist_wheel
```
命令就可以在 dist 文件夹中看到打包好的库文件`qns-<version>-py3-none-any.whl`了。

任何人只需要拿到这个 whl 文件，然后使用 pip 命令就可以将这个包安装到系统中：
```
pip3 install qns-<version>-py3-none-any.whl
```

## 构建API文档
我们使用 sphinx 来自动构建API文档，需要首先安装 sphinx 库
```
pip3 install sphinx sphinx_rtd_theme sphinx-autobuild
```

之后，在 docs 文件夹下运行命令
```
sphinx-apidoc -o docs/source qns
make html
```
即可编译生成静态文档。最后，使用下面的命令将其 push 到 github pages 上：
```
git subtree push --prefix docs/build/html origin gh-pages
```